"use strict";var Message=require("../models/message.model"),getMessages=function(s,r,t){var a,n,u,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=s.body,n=a.from,u=a.to,console.log(n),e.next=5,regeneratorRuntime.awrap(Message.find({users:{$all:[n,u]}}).sort({updatedAt:1}));case 5:o=e.sent,c=o.map(function(e){return{fromSelf:e.sender.toString()===n,message:e.message.text}}),r.json(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0);case 13:case"end":return e.stop()}},null,null,[[0,10]])},addMessage=function(s,r,t){var a,n,u,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=s.body,n=a.users,u=a.sender,o=a.message,e.next=4,regeneratorRuntime.awrap(Message.create({message:{text:o},users:n,sender:u}));case 4:if(e.sent)return e.abrupt("return",r.json({msg:"Message added successfully."}));e.next=9;break;case 9:return e.abrupt("return",r.json({msg:"Failed to add message to the database"}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0);case 15:case"end":return e.stop()}},null,null,[[0,12]])};module.exports={getMessages:getMessages,addMessage:addMessage};
//# sourceMappingURL=message.controller.min.js.map
